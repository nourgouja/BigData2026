<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<!--
  Gaza YouTube Analytics - YARN Site Configuration
  Defines ResourceManager, NodeManager, and resource allocation
-->
<configuration>
    <!-- ResourceManager hostname -->
    <property>
        <name>yarn.resourcemanager.hostname</name>
        <value>namenode</value>
        <description>ResourceManager hostname</description>
    </property>

    <!-- ResourceManager address -->
    <property>
        <name>yarn.resourcemanager.address</name>
        <value>namenode:8032</value>
        <description>ResourceManager IPC address</description>
    </property>

    <!-- ResourceManager scheduler address -->
    <property>
        <name>yarn.resourcemanager.scheduler.address</name>
        <value>namenode:8030</value>
        <description>ResourceManager scheduler address</description>
    </property>

    <!-- ResourceManager resource tracker -->
    <property>
        <name>yarn.resourcemanager.resource-tracker.address</name>
        <value>namenode:8031</value>
        <description>ResourceManager resource tracker address</description>
    </property>

    <!-- ResourceManager admin address -->
    <property>
        <name>yarn.resourcemanager.admin.address</name>
        <value>namenode:8033</value>
        <description>ResourceManager admin address</description>
    </property>

    <!-- ResourceManager Web UI -->
    <property>
        <name>yarn.resourcemanager.webapp.address</name>
        <value>namenode:8088</value>
        <description>ResourceManager Web UI address</description>
    </property>

    <!-- NodeManager auxiliary services -->
    <property>
        <name>yarn.nodemanager.aux-services</name>
        <value>mapreduce_shuffle</value>
        <description>Auxiliary services for MapReduce</description>
    </property>

    <!-- NodeManager memory -->
    <property>
        <name>yarn.nodemanager.resource.memory-mb</name>
        <value>4096</value>
        <description>Physical memory for containers (4 GB per NodeManager)</description>
    </property>

    <!-- NodeManager CPU cores -->
    <property>
        <name>yarn.nodemanager.resource.cpu-vcores</name>
        <value>2</value>
        <description>CPU cores for containers</description>
    </property>

    <!-- Minimum container memory -->
    <property>
        <name>yarn.scheduler.minimum-allocation-mb</name>
        <value>512</value>
        <description>Minimum container memory (512 MB)</description>
    </property>

    <!-- Maximum container memory -->
    <property>
        <name>yarn.scheduler.maximum-allocation-mb</name>
        <value>4096</value>
        <description>Maximum container memory (4 GB)</description>
    </property>

    <!-- Virtual memory check -->
    <property>
        <name>yarn.nodemanager.vmem-check-enabled</name>
        <value>false</value>
        <description>Disable virtual memory checking</description>
    </property>

    <!-- Physical memory check -->
    <property>
        <name>yarn.nodemanager.pmem-check-enabled</name>
        <value>false</value>
        <description>Disable physical memory checking</description>
    </property>

    <!-- Application classpath -->
    <property>
        <name>yarn.application.classpath</name>
        <value>$HADOOP_CONF_DIR,$HADOOP_COMMON_HOME/share/hadoop/common/*,$HADOOP_COMMON_HOME/share/hadoop/common/lib/*,$HADOOP_HDFS_HOME/share/hadoop/hdfs/*,$HADOOP_HDFS_HOME/share/hadoop/hdfs/lib/*,$HADOOP_YARN_HOME/share/hadoop/yarn/*,$HADOOP_YARN_HOME/share/hadoop/yarn/lib/*</value>
    </property>

    <!-- Log aggregation -->
    <property>
        <name>yarn.log-aggregation-enable</name>
        <value>true</value>
        <description>Enable log aggregation</description>
    </property>

    <!-- Log retention -->
    <property>
        <name>yarn.log-aggregation.retain-seconds</name>
        <value>604800</value>
        <description>Log retention period (7 days)</description>
    </property>
</configuration>
